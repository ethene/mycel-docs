# گروه‌ها

گروه‌ها به چند نفر اجازه می‌دهند با هم چت کنند. بر خلاف کانال‌ها، **هر عضوی می‌تواند پیام بگذارد**.

![لیست گروه‌ها](../assets/screenshots/fa/groups-list.png){ width="300" align="right" }

## گروه‌ها در مقابل سایر انواع گفتگو

| ویژگی | پیام مستقیم | گروه | کانال |
|-------|-------------|------|-------|
| شرکت‌کنندگان | ۲ نفر | چند عضو | مشترکین نامحدود |
| چه کسی می‌تواند پست کند | هر دو | هر عضو | فقط مالک |
| روش پیوستن | افزودن مخاطب | دعوت (خصوصی) یا پیوستن (عمومی) | اشتراک |
| رمزنگاری | بله | بله | بله |
| مناسب برای | خصوصی ۱ به ۱ | چت‌های تیمی، دوستان | اطلاعیه‌ها |

## انواع گروه‌ها

### گروه‌های خصوصی

- **فقط با دعوت** - اعضا باید توسط مدیر دعوت شوند
- **پنهان** - در کشف عمومی ظاهر نمی‌شوند
- **امن** - کلید گروه فقط از طریق دعوت‌های رمزنگاری‌شده به اشتراک گذاشته می‌شود

### گروه‌های عمومی

- **باز** - هر کسی با دانستن شناسه گروه می‌تواند بپیوندد
- **قابل کشف** - می‌توانند در اطلاعیه‌های گروه ظاهر شوند
- **راحت** - اشتراک آسان‌تر، امنیت کمتر

---

## ایجاد گروه

### گام به گام

1. Mycel را باز کنید و به تب **چت‌ها** بروید
2. روی زیرتب **گروه‌ها** بزنید
3. روی **+** (دکمه عمل شناور) بزنید
4. **نام گروه** را وارد کنید (الزامی)
5. اختیاری **توضیحات** اضافه کنید
6. **خصوصی** یا **عمومی** را انتخاب کنید:
   - خصوصی: اعضا باید دعوت شوند
   - عمومی: هر کسی با شناسه گروه می‌تواند بپیوندد
7. روی **ایجاد گروه** بزنید

شما حالا مدیر گروه هستید و می‌توانید شروع به دعوت اعضا کنید.

### پشت صحنه چه اتفاقی می‌افتد

وقتی گروه ایجاد می‌کنید:

1. یک شناسه گروه منحصربه‌فرد تولید می‌شود
2. یک کلید رمزنگاری ۲۵۶ بیتی برای گروه ایجاد می‌شود
3. شما مدیر می‌شوید (فقط مدیران می‌توانند در گروه‌های خصوصی دعوت/حذف کنند)
4. گروه بلافاصله آماده استفاده است

---

## دعوت اعضا

### به یک گروه خصوصی

به عنوان مدیر:

1. چت گروه را باز کنید
2. روی نام/سربرگ گروه بزنید تا اطلاعات گروه را ببینید
3. روی **دعوت اعضا** یا **افزودن عضو** بزنید
4. مخاطبین را از لیست مخاطبین انتخاب کنید
5. روی **ارسال دعوت** بزنید

دعوت به طور خاص برای هر گیرنده رمزنگاری می‌شود. وقتی قبول کنند:

- کلید گروه را دریافت می‌کنند
- به لیست اعضا اضافه می‌شوند
- می‌توانند پیام‌های گروه را ببینند و پست کنند

### به یک گروه عمومی

برای گروه‌های عمومی، می‌توانید:

- شناسه گروه را مستقیماً به اشتراک بگذارید (خودشان می‌توانند بپیوندند)
- از جریان دعوت بالا استفاده کنید (همان طور کار می‌کند)

!!! tip "دعوت‌ها آفلاین کار می‌کنند"
    دعوت‌های گروه مثل پیام‌های معمولی از مش عبور می‌کنند. گیرندگان می‌توانند دعوت‌ها را حتی اگر همزمان آنلاین نباشید قبول کنند.

---

## دریافت و قبول دعوت‌ها

وقتی کسی شما را به گروه دعوت می‌کند:

1. اعلان دریافت می‌کنید (اگر فعال باشد)
2. دعوت در لیست پیام‌های شما ظاهر می‌شود
3. روی دعوت بزنید تا جزئیات گروه را ببینید:
   - نام گروه
   - چه کسی دعوت کرده
   - تعداد اعضای فعلی
4. روی **پیوستن به گروه** بزنید تا قبول کنید

بعد از پیوستن:

- گروه در تب گروه‌های شما ظاهر می‌شود
- می‌توانید تاریخچه پیام را ببینید (از زمان پیوستن)
- می‌توانید پیام بگذارید

### رد دعوت‌ها

فقط دعوت را نادیده بگیرید یا رد کنید. به گروه اضافه نمی‌شوید.

---

## مدیریت عضویت گروه

### مشاهده اعضا

1. چت گروه را باز کنید
2. روی سربرگ گروه بزنید
3. لیست اعضا را با نقش‌ها ببینید:
   - **مدیر** - می‌تواند دعوت/حذف کند
   - **عضو** - می‌تواند بخواند و پست کند

### افزودن اعضا (فقط مدیر)

1. اطلاعات گروه را باز کنید
2. روی **افزودن عضو** یا **دعوت** بزنید
3. مخاطبین را انتخاب کنید
4. دعوت‌ها را ارسال کنید

### حذف اعضا (فقط مدیر)

1. اطلاعات گروه را باز کنید
2. عضو را در لیست پیدا کنید
3. روی نام یا گزینه حذف بزنید
4. حذف را تأیید کنید

!!! warning "اعضای حذف شده پیام‌های قدیمی را نگه می‌دارند"
    وقتی کسی را حذف می‌کنید، دسترسی به پیام‌های جدید را از دست می‌دهد اما هنوز می‌تواند پیام‌هایی که قبل از حذف دریافت کرده را بخواند. کلید گروه چرخش نمی‌کند.

### ارتقا به مدیر

مدیران می‌توانند اعضای دیگر را ارتقا دهند:

1. اطلاعات گروه را باز کنید
2. روی نام یک عضو بزنید
3. **مدیر کردن** را انتخاب کنید

---

## پست گذاشتن در گروه‌ها

پست گذاشتن مثل پیام‌های مستقیم کار می‌کند:

1. گروه را باز کنید
2. پیام خود را بنویسید
3. روی **ارسال** بزنید

پیام شما:

1. با کلید گروه رمزنگاری می‌شود
2. به همه اعضا از طریق مش ارسال می‌شود
3. به تدریج که اعضا با رله‌ها مواجه می‌شوند تحویل می‌شود

### تحویل پیام در گروه‌ها

پیام‌های گروه مثل پیام‌های مستقیم سفر می‌کنند - از طریق مش. هر عضو پیام را به طور مستقل دریافت می‌کند، پس زمان تحویل ممکن است برای هر عضو متفاوت باشد.

| وضعیت | معنی |
|-------|------|
| در انتظار | منتظر فرصت رله |
| در حال ارسال | در حال عبور از مش |
| تحویل شده | به حداقل یک عضو رسید |

---

## خروج از گروه

برای خروج از گروه:

1. چت گروه را باز کنید
2. روی سربرگ گروه بزنید
3. به پایین اسکرول کنید
4. روی **خروج از گروه** بزنید
5. تأیید کنید

بعد از خروج:

- از لیست اعضا حذف می‌شوید
- پیام‌های جدید دریافت نمی‌کنید
- گروه در تاریخچه شما می‌ماند (بایگانی)
- بدون دعوت جدید نمی‌توانید به گروه‌های خصوصی دوباره بپیوندید

---

## اعلان‌های گروه

### بی‌صدا کردن یک گروه

برای بی‌صدا کردن اعلان‌های یک گروه خاص:

1. گروه را باز کنید
2. روی سربرگ گروه بزنید
3. **بی‌صدا** را فعال کنید
4. مدت بی‌صدا را انتخاب کنید (۱ ساعت، ۸ ساعت، ۱ روز، همیشه)

گروه‌های بی‌صدا هنوز پیام دریافت می‌کنند، اما اعلان نمی‌دهند.

### تنظیمات کلی گروه

در **تنظیمات > اعلان‌ها**:

- **اعلان‌های گروه مش** - فعال/غیرفعال هشدارها برای پخش مش داخلی
- **اعلان‌های پاپ‌آپ** - نمایش هشدارهای شناور
- **صدا** / **لرزش** - بازخورد صوتی و لرزشی

---

## همگام‌سازی گروه و CRDT

گروه‌ها از یک فناوری خاص به نام **CRDT** (نوع داده تکرار شده بدون تعارض) برای همگام‌سازی عضویت در همه اعضا استفاده می‌کنند، حتی وقتی آفلاین هستند.

### نحوه کار

- هر تغییر عضویت (افزودن/حذف) با برچسب زمانی ثبت می‌شود
- وقتی اعضا دوباره متصل می‌شوند، تغییرات به طور خودکار ادغام می‌شوند
- صرف نظر از ترتیب دریافت تغییرات، وضعیت نهایی یکسان است

### این برای شما یعنی چه

- **سازگار با آفلاین** - تغییرات عضویت هر وقت دستگاه‌ها مواجه شوند همگام می‌شوند
- **سازگار** - همه در نهایت لیست اعضای یکسانی می‌بینند
- **بدون تعارض** - تغییرات همزمان به طور خودکار مدیریت می‌شوند

---

## نکاتی برای گروه‌ها

### برای تحویل بهتر

- **برنامه را در حال اجرا نگه دارید** - عملیات پس‌زمینه به رله پیام‌های گروه کمک می‌کند
- **اعضای بیشتر = مش بهتر** - هر عضو می‌تواند به دیگران رله کند
- **صبور باشید** - پیام‌های گروه ممکن است بیشتر از DM طول بکشند (گیرندگان بیشتر)

### برای حریم خصوصی

- **از گروه‌های خصوصی استفاده کنید** برای بحث‌های حساس
- **دعوت‌ها را تأیید کنید** - مطمئن شوید می‌دانید چه کسی دعوت کرده
- **مدیر با دقت** - فقط اعضای مورد اعتماد را به مدیر ارتقا دهید

### برای سازماندهی

- **از نام‌های توصیفی استفاده کنید** - پیدا کردن گروه‌ها را آسان می‌کند
- **گروه‌های قدیمی را بایگانی کنید** - به چپ بکشید تا گروه‌های غیرفعال را بایگانی کنید
- **گروه‌های مهم را سنجاق کنید** - به راست بکشید تا گروه‌های پرکاربرد را سنجاق کنید

---

## عیب‌یابی

### «نمی‌توانم کسی را به گروهم اضافه کنم»

- **آیا مدیر هستید؟** فقط مدیران می‌توانند در گروه‌های خصوصی دعوت کنند
- **آیا مخاطبشان را دارید؟** فقط می‌توانید افراد در لیست مخاطبین را دعوت کنید
- **آیا دعوت گیر کرده؟** صف آزمایشگاه مش را برای دعوت‌های در انتظار بررسی کنید

### «دعوت گروه دریافت نکردم»

- **لیست پیام‌ها را بررسی کنید** - دعوت‌ها به عنوان پیام‌های خاص ظاهر می‌شوند
- **آیا فرستنده نزدیک است؟** دعوت‌ها مثل پیام‌ها از مش عبور می‌کنند
- **مجوزها را بررسی کنید** - مطمئن شوید Mycel مجوز اعلان دارد

### «پیام‌های گروه نمی‌رسند»

- **اتصال را بررسی کنید** - به آزمایشگاه مش > نزدیک بروید تا ببینید متصل هستید
- **آیا گروه بی‌صداست؟** تنظیمات گروه را بررسی کنید
- **آیا اعضای دیگر آنلاین هستند؟** پیام‌های گروه به مسیرهای رله نیاز دارند

### «تصادفاً از گروه خارج شدم»

- **گروه‌های خصوصی** - از مدیر بخواهید دعوت جدید بفرستد
- **گروه‌های عمومی** - با شناسه گروه دوباره بپیوندید

---

## جزئیات فنی

برای توسعه‌دهندگان و کاربران کنجکاو:

| ویژگی | مقدار |
|-------|-------|
| رمزنگاری | AES-256-GCM با کلید مشترک گروه |
| توزیع کلید | ECIES (X25519 + XChaCha20-Poly1305) |
| همگام‌سازی عضویت | 2P-Set CRDT |
| حداکثر اعضا | ~۱۰۰ (محدودیت عملی) |
| TTL پیش‌فرض پیام | ۲۴ ساعت |

**عمیق‌تر:** [جزئیات فنی گروه‌های خصوصی](../deep-dive/groups/private-groups.md)

---

**بعدی:** [کانال‌ها](channels.md) | [پخش مش](mesh-broadcast.md) | [مخاطبین](contacts.md)
