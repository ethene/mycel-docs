# پیام‌رسانی

این راهنما پیام‌های مستقیم (DM) - گفتگوهای رمزنگاری‌شده یک به یک را پوشش می‌دهد. برای گفتگوهای گروهی، به [گروه‌ها](groups.md) مراجعه کنید. برای کانال‌های پخش، به [کانال‌ها](channels.md) مراجعه کنید.

![چت پیام مستقیم](../assets/screenshots/fa/chat-dm.png){ width="300" align="right" }

## نمای کلی پیام‌های مستقیم

پیام‌های مستقیم:

- **خصوصی** هستند - رمزنگاری سرتاسر، فقط شما و گیرنده می‌توانند بخوانند
- **یک به یک** هستند - بین شما و یک نفر دیگر
- **آفلاین-کار** هستند - بدون اینترنت از طریق مش کار می‌کنند
- **ماندگار** هستند - تا تحویل یا انقضا ذخیره می‌شوند

---

## ارسال پیام‌ها

### شروع یک گفتگو

**از مخاطبین:**

1. به تب **مخاطبین** بروید
2. روی یک مخاطب بزنید
3. روی **پیام** بزنید تا چت شروع شود

**از چت‌ها:**

1. به تب **چت‌ها** بروید
2. روی یک گفتگوی موجود بزنید، یا
3. روی **+** بزنید تا پیام جدید شروع کنید
4. یک مخاطب انتخاب کنید

### نوشتن پیام‌ها

1. روی ورودی متن در پایین بزنید
2. پیام خود را بنویسید
3. روی **ارسال** (آیکون فلش) بزنید

پیام شما:

1. با کلید عمومی گیرنده رمزنگاری می‌شود
2. با کلید خصوصی شما امضا می‌شود
3. برای تحویل از طریق مش در صف قرار می‌گیرد

### آنچه می‌توانید ارسال کنید

| نوع | پشتیبانی | یادداشت‌ها |
|-----|----------|-----------|
| متن | بله | تا چند کیلوبایت |
| لینک‌ها | بله | URLهای قابل کلیک |
| ایموجی | بله | ایموجی استاندارد |
| فایل‌ها | هنوز نه | برای آینده برنامه‌ریزی شده |
| تصاویر | هنوز نه | برای آینده برنامه‌ریزی شده |
| صدا | هنوز نه | برای آینده برنامه‌ریزی شده |

---

## وضعیت پیام

### توضیح آیکون‌های وضعیت

| آیکون | وضعیت | معنی | چه کار کنید |
|-------|-------|------|------------|
| ساعت | **در انتظار** | پیام در صف، منتظر رله | صبر کنید - یک دستگاه نزدیک آن را رله می‌کند |
| یک تیک | **در حال ارسال** | به مش تحویل داده شده، در حال سفر | پیام در راه است |
| دو تیک | **تحویل شده** | به دستگاه گیرنده رسید | تمام! دریافت کردند |
| هشدار/X | **خطا** | مشکلی پیش آمد | اتصال را بررسی کنید، دوباره امتحان کنید |
| «EXP» | **منقضی** | TTL قبل از تحویل تمام شد | پیام تحویل نخواهد شد |

### جریان وضعیت

```
در انتظار → در حال ارسال → تحویل شده
    ↓           ↓
  خطا        منقضی
```

### درک زمان‌های تحویل

| سناریو | زمان معمول |
|--------|------------|
| گیرنده نزدیک | ثانیه |
| یک ساختمان/رویداد | دقیقه |
| یک شهر | ساعت‌ها |
| شهرهای مختلف | ساعت‌ها تا روزها |
| مناطق دورافتاده | روزها یا بیشتر |

!!! info "بدون نیاز به اینترنت"
    پیام‌ها از طریق برخوردهای دستگاه به دستگاه سفر می‌کنند. کاربران Mycel بیشتر = تحویل سریع‌تر.

---

## عملیات پیام

### منوی نگه‌داشتن طولانی

روی هر پیامی طولانی بزنید تا عملیات را ببینید:

| عملیات | توضیح |
|--------|-------|
| **کپی** | کپی متن پیام به کلیپ‌بورد |
| **فوروارد** | ارسال به مخاطب/گروه دیگر |
| **حذف** | حذف پیام |
| **اطلاعات** | مشاهده جزئیات پیام |

### کپی پیام‌ها

1. روی پیام طولانی بزنید
2. روی **کپی** بزنید
3. متن به کلیپ‌بورد کپی می‌شود
4. هر جا بخواهید پیست کنید

### فوروارد پیام‌ها

1. روی پیام طولانی بزنید
2. روی **فوروارد** بزنید
3. مقصد را انتخاب کنید:
   - یک مخاطب
   - یک گروه
   - یک کانال (اگر مالک هستید)
4. تأیید کنید

پیام فوروارد شده:

- به عنوان ارسال شده توسط شما نشان داده می‌شود
- نشان نمی‌دهد که فوروارد شده
- برای گیرنده جدید دوباره رمزنگاری می‌شود

### حذف پیام‌ها

1. روی پیام طولانی بزنید
2. روی **حذف** بزنید
3. تأیید کنید

!!! warning "فقط حذف محلی"
    حذف پیام را از دستگاه شما پاک می‌کند. گیرنده هنوز کپی خود را دارد.

### اطلاعات پیام

مشاهده جزئیات درباره یک پیام:

1. روی پیام طولانی بزنید
2. روی **اطلاعات** بزنید
3. ببینید:
   - شناسه پیام
   - زمان ارسال
   - وضعیت تحویل
   - وضعیت رمزنگاری
   - اطلاعات گیرنده

---

## مدیریت گفتگو

### سنجاق کردن گفتگوها

چت‌های مهم را بالا نگه دارید:

1. به **چت‌ها** > **پیام‌های مستقیم** بروید
2. روی یک گفتگو به **راست** بکشید
3. روی **سنجاق** بزنید

گفتگوهای سنجاق شده:

- بالای لیست شما می‌مانند
- نشانگر سنجاق نشان می‌دهند
- سنجاق می‌مانند تا برداشته شود

**برای برداشتن سنجاق:** دوباره به راست بکشید و روی **برداشتن سنجاق** بزنید

### بایگانی گفتگوها

پنهان کردن چت‌های غیرفعال:

1. روی یک گفتگو به **چپ** بکشید
2. روی **بایگانی** بزنید

گفتگوهای بایگانی‌شده:

- به تب **بایگانی** می‌روند
- در لیست اصلی ظاهر نمی‌شوند
- هنوز پیام دریافت می‌کنند (اعلان داده می‌شود)

**برای خارج کردن از بایگانی:**

1. به تب **بایگانی** بروید
2. روی گفتگو به چپ بکشید
3. روی **خارج از بایگانی** بزنید

### نکات سازماندهی

| هدف | عملیات |
|-----|--------|
| اولویت دادن به چت‌های مهم | سنجاق کنید |
| تمیز کردن گفتگوهای قدیمی | بایگانی کنید |
| پیدا کردن چت خاص | از جستجو استفاده کنید |

---

## جستجو

### پیدا کردن پیام‌ها

1. به **چت‌ها** بروید
2. روی آیکون جستجو یا نوار جستجو بزنید
3. عبارت جستجوی خود را بنویسید

جستجو در این موارد می‌گردد:

- نام مخاطبین
- محتوای پیام
- نام گروه‌ها

### نکات جستجو

- با نام جستجو کنید تا مخاطب را سریع پیدا کنید
- با کلمه کلیدی جستجو کنید تا پیام‌های درباره یک موضوع را پیدا کنید
- تطبیق جزئی کار می‌کند (جستجوی «جلس» «جلسه» را پیدا می‌کند)

---

## اعلان‌ها

### اعلان‌های پیام

وقتی پیامی دریافت می‌کنید:

- اعلان ظاهر می‌شود (اگر فعال باشد)
- نشان روی آیکون برنامه به‌روز می‌شود
- تعداد خوانده‌نشده در تب چت‌ها نشان داده می‌شود

### تنظیمات اعلان

کنترل اعلان‌ها در **تنظیمات > اعلان‌ها**:

| تنظیم | اثر |
|-------|-----|
| پاپ‌آپ | پیش‌نمایش شناور ظاهر می‌شود |
| صدا | هشدار صوتی پخش می‌شود |
| لرزش | گوشی می‌لرزد |

### بی‌صدا کردن هر گفتگو

بی‌صدا کردن گفتگوهای خاص:

1. گفتگو را باز کنید
2. روی سربرگ (نام مخاطب) بزنید
3. **بی‌صدا** را فعال کنید
4. مدت را انتخاب کنید

---

## رمزنگاری

### نحوه کار

هر DM رمزنگاری سرتاسر دارد:

1. **توافق کلید** - دستگاه‌های شما یک راز مشترک با استفاده از X25519 ایجاد می‌کنند
2. **رمزنگاری** - پیام با AES-256-GCM رمزنگاری می‌شود
3. **امضا** - پیام با Ed25519 امضا می‌شود تا ثابت کند از شماست
4. **انتقال** - فقط داده رمزنگاری‌شده از مش عبور می‌کند
5. **رمزگشایی** - فقط دستگاه گیرنده می‌تواند رمزگشایی کند

### این یعنی چه

- **گره‌های رله نمی‌توانند بخوانند** - فقط بلوب‌های رمزنگاری‌شده می‌بینند
- **ما نمی‌توانیم بخوانیم** - هیچ سروری کلیدها را ندارد
- **فقط گیرنده می‌تواند بخواند** - رمزنگاری مختص کلید اوست

### تأیید

هر پیام از نظر رمزنگاری تأیید می‌شود:

- امضا هویت فرستنده را اثبات می‌کند
- رمزنگاری تضمین می‌کند فقط گیرنده می‌خواند
- دستکاری تشخیص داده شده و رد می‌شود

---

## نکاتی برای پیام‌رسانی مؤثر

### برای قابلیت اطمینان

- **برنامه را در حال اجرا نگه دارید** - عملیات پس‌زمینه ضروری است
- **مجوزها را اعطا کنید** - موقعیت و بلوتوث برای مش لازم است
- **صبور باشید** - تحویل مش زمان می‌برد
- **وضعیت را بررسی کنید** - منتظر تأیید تحویل باشید

### برای پیام‌های مهم

- **تحویل را تأیید کنید** - قبل از فرض دریافت، منتظر دو تیک باشید
- **از چند مسیر استفاده کنید** - Nostr + نزدیک برای تحویل سریع‌تر
- **زمان‌بندی را در نظر بگیرید** - وقتی گیرنده احتمالاً فعال است ارسال کنید

### برای سازماندهی

- **مخاطبین مهم را سنجاق کنید** - دسترسی سریع به چت‌های مکرر
- **گفتگوهای قدیمی را بایگانی کنید** - لیست را تمیز نگه دارید
- **از جستجو استفاده کنید** - پیام‌های قدیمی را سریع پیدا کنید

---

## عیب‌یابی

### «پیام روی در انتظار گیر کرده»

- **اتصال را بررسی کنید** - به آزمایشگاه مش > نزدیک بروید
- **دیگران نزدیک هستند؟** - به دستگاه‌های رله نیاز دارید
- **صبر کنید** - پیام‌ها در صف می‌مانند تا فرصت پیش بیاید
- **صف را بررسی کنید** - آزمایشگاه مش > صف وضعیت را نشان می‌دهد

### «پیام خطا نشان می‌دهد»

- **گیرنده را بررسی کنید** - آیا UID او درست است؟
- **دوباره امتحان کنید** - به صف بروید، روی پیام بزنید، دوباره امتحان کنید
- **اتصال را بررسی کنید** - مطمئن شوید مش فعال است

### «پیام دریافت نمی‌کنم»

- **اعلان‌ها را بررسی کنید** - آیا فعال هستند؟
- **بی‌صدا را بررسی کنید** - آیا گفتگو بی‌صدا است؟
- **پس‌زمینه را بررسی کنید** - آیا Mycel در حال اجراست؟
- **باتری را بررسی کنید** - آیا برنامه بسته می‌شود؟

### «پیام‌ها خیلی طول می‌کشند»

- **برای مش عادی است** - زمان تحویل متفاوت است
- **Nostr را بررسی کنید** - رله اینترنتی سرعت را بالا می‌برد
- **کاربران بیشتر کمک می‌کنند** - دوستان را به استفاده از Mycel تشویق کنید

---

## مقایسه انواع گفتگو

| ویژگی | پیام مستقیم | گروه | کانال |
|-------|-------------|------|-------|
| شرکت‌کنندگان | ۲ | چند نفر | نامحدود |
| چه کسی می‌تواند پست کند | هر دو | هر عضو | فقط مالک |
| رمزنگاری | سرتاسر | کلید مشترک | اختیاری |
| مناسب برای | چت خصوصی | بحث تیمی | اطلاعیه‌ها |
| راهنما | این صفحه | [گروه‌ها](groups.md) | [کانال‌ها](channels.md) |

---

**بعدی:** [گروه‌ها](groups.md) | [کانال‌ها](channels.md) | [نحوه تحویل](delivery.md)
